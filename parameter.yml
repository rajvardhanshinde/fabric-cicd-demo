# parameter.yml
# Rebind Semantic Models (TMDL) from DEV â†’ PROD during main-branch deploys.
# Swaps SQL endpoint host and SQL endpoint ID.

find_replace:
  - environments: ["PROD"]
    file_glob: "**/*.SemanticModel/**/*.tmdl"
    replacements:
      # Swap SQL endpoint hostname
      - find: 'Sql.Database("${FABRIC_DEV_SQL_HOST}"'
        replace: 'Sql.Database("${FABRIC_PROD_SQL_HOST}"'

      # Swap SQL endpoint Id (second argument of Sql.Database)
      - find: '"${FABRIC_DEV_SQL_ID}")'
        replace: '"${FABRIC_PROD_SQL_ID}")'
